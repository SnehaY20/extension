<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF to Image Converter</title>
    <style>
        body {
            width: 420px;
            min-height: 600px;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            overflow-x: hidden;
        }
        
        /* Prevent popup from closing on click */
        * {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        input[type="file"], input[type="range"], select, button {
            -webkit-user-select: auto;
            -moz-user-select: auto;
            -ms-user-select: auto;
            user-select: auto;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Prevent text selection that might cause popup to close */
        .no-select {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Ensure buttons don't cause popup close */
        button, input, select {
            outline: none;
            border: none;
            background: none;
        }
        
        button:focus, input:focus, select:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
    </style>
</head>
<body class="no-select">
    <div id="root"></div>
    
    <!-- Include your React app bundle here -->
    <script src="popup.js"></script>
    
    <script>
        // Prevent right-click context menu that might interfere
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        // Prevent drag and drop that might cause issues
        document.addEventListener('dragover', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('drop', function(e) {
            e.preventDefault();
        });
        
        // Keep popup alive longer
        let keepAlive = setInterval(() => {
            chrome.runtime.sendMessage({type: "KEEP_ALIVE"}, () => {
                if (chrome.runtime.lastError) {
                    clearInterval(keepAlive);
                }
            });
        }, 20000);
        
        // Clean up on unload
        window.addEventListener('beforeunload', () => {
            clearInterval(keepAlive);
        });
    </script>
</body>
</html>